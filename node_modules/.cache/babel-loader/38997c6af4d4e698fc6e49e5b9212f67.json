{"ast":null,"code":"import * as types from './../constants/ActionTypes';\nimport * as config from './../constants/Config';\nimport { remove, reject } from 'lodash'; // const uuidv4 = require('uuid/v4');\n\nimport { v4 as uuidv4 } from 'uuid';\nlet defaultState = [];\nlet tasks = JSON.parse(localStorage.getItem(config.ITEMS_FROM_LOCAL_STOGARE));\ndefaultState = tasks !== null && tasks.length > 0 ? tasks : defaultState; // [{id: \"A1\", name: \"Coding\", level: 1}]\n// [{\"id\":\"A1\",\"name\":\"Coding\",\"level\":1},{\"id\":\"A3\",\"name\":\"Abc\",\"level\":2},{\"id\":\"A4\",\"name\":\"Coding 123\",\"level\":2}]\n\nconst items = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let id = null;\n\n  switch (action.type) {\n    case types.DELETE_ITEM:\n      id = action.id;\n      remove(state, item => {\n        return item.id === id;\n      });\n      localStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE, JSON.stringify(state));\n      return [...state];\n\n    case types.SUBMIT_FORM:\n      id = null;\n      let {\n        item\n      } = action;\n\n      if (item.id !== '') {\n        //edit\n        state = reject(state, {\n          id: item.id\n        });\n        id = item.id;\n      } else {\n        // add\n        id = uuidv4();\n      }\n\n      state.push({\n        id: id,\n        name: item.name,\n        level: +item.level\n      });\n      localStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE, JSON.stringify(state));\n      return [...state];\n\n    default:\n      return state;\n  }\n};\n\nexport default items;","map":{"version":3,"names":["types","config","remove","reject","v4","uuidv4","defaultState","tasks","JSON","parse","localStorage","getItem","ITEMS_FROM_LOCAL_STOGARE","length","items","state","action","id","type","DELETE_ITEM","item","setItem","stringify","SUBMIT_FORM","push","name","level"],"sources":["C:/xampp/htdocs/ch03_hooks_grAEU/ch03_hooks/src/reducers/items.js"],"sourcesContent":["import * as types from './../constants/ActionTypes';\r\nimport * as config from './../constants/Config';\r\nimport {remove, reject } from 'lodash';\r\n\r\n// const uuidv4 = require('uuid/v4');\r\nimport { v4 as uuidv4 } from 'uuid';\r\nlet defaultState = [];\r\n\r\nlet tasks \t= JSON.parse(localStorage.getItem(config.ITEMS_FROM_LOCAL_STOGARE));\r\ndefaultState= (tasks !== null && tasks.length > 0) ? tasks : defaultState;\r\n\r\n// [{id: \"A1\", name: \"Coding\", level: 1}]\r\n// [{\"id\":\"A1\",\"name\":\"Coding\",\"level\":1},{\"id\":\"A3\",\"name\":\"Abc\",\"level\":2},{\"id\":\"A4\",\"name\":\"Coding 123\",\"level\":2}]\r\nconst items = (state = defaultState, action) => {\r\n\tlet id = null;\r\n\r\n\tswitch(action.type){\r\n\t\tcase types.DELETE_ITEM:\r\n\t\t\tid = action.id;\r\n\t        remove(state, (item)=> {\r\n\t            return item.id === id;\r\n\t        });\r\n\t        localStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE, JSON.stringify(state));\r\n\t        return [...state];\r\n\r\n\t    case types.SUBMIT_FORM:\r\n\t    \tid = null;\r\n\t    \tlet {item} = action;\r\n\t        if(item.id !== '') { //edit\r\n\t            state = reject(state, { id: item.id});\r\n\t            id = item.id;\r\n\t        } else { // add\r\n\t            id = uuidv4();\r\n\t        }\r\n\r\n\t        state.push({\r\n\t            id      : id,\r\n\t            name    : item.name,\r\n\t            level   : +item.level\r\n\t        })\r\n\r\n\t        localStorage.setItem(config.ITEMS_FROM_LOCAL_STOGARE, JSON.stringify(state));\r\n\t        return [...state];\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default items;"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,4BAAvB;AACA,OAAO,KAAKC,MAAZ,MAAwB,uBAAxB;AACA,SAAQC,MAAR,EAAgBC,MAAhB,QAA8B,QAA9B,C,CAEA;;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,IAAIC,YAAY,GAAG,EAAnB;AAEA,IAAIC,KAAK,GAAIC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBV,MAAM,CAACW,wBAA5B,CAAX,CAAb;AACAN,YAAY,GAAGC,KAAK,KAAK,IAAV,IAAkBA,KAAK,CAACM,MAAN,GAAe,CAAlC,GAAuCN,KAAvC,GAA+CD,YAA7D,C,CAEA;AACA;;AACA,MAAMQ,KAAK,GAAG,YAAkC;EAAA,IAAjCC,KAAiC,uEAAzBT,YAAyB;EAAA,IAAXU,MAAW;EAC/C,IAAIC,EAAE,GAAG,IAAT;;EAEA,QAAOD,MAAM,CAACE,IAAd;IACC,KAAKlB,KAAK,CAACmB,WAAX;MACCF,EAAE,GAAGD,MAAM,CAACC,EAAZ;MACMf,MAAM,CAACa,KAAD,EAASK,IAAD,IAAS;QACnB,OAAOA,IAAI,CAACH,EAAL,KAAYA,EAAnB;MACH,CAFK,CAAN;MAGAP,YAAY,CAACW,OAAb,CAAqBpB,MAAM,CAACW,wBAA5B,EAAsDJ,IAAI,CAACc,SAAL,CAAeP,KAAf,CAAtD;MACA,OAAO,CAAC,GAAGA,KAAJ,CAAP;;IAEJ,KAAKf,KAAK,CAACuB,WAAX;MACCN,EAAE,GAAG,IAAL;MACA,IAAI;QAACG;MAAD,IAASJ,MAAb;;MACG,IAAGI,IAAI,CAACH,EAAL,KAAY,EAAf,EAAmB;QAAE;QACjBF,KAAK,GAAGZ,MAAM,CAACY,KAAD,EAAQ;UAAEE,EAAE,EAAEG,IAAI,CAACH;QAAX,CAAR,CAAd;QACAA,EAAE,GAAGG,IAAI,CAACH,EAAV;MACH,CAHD,MAGO;QAAE;QACLA,EAAE,GAAGZ,MAAM,EAAX;MACH;;MAEDU,KAAK,CAACS,IAAN,CAAW;QACPP,EAAE,EAAQA,EADH;QAEPQ,IAAI,EAAML,IAAI,CAACK,IAFR;QAGPC,KAAK,EAAK,CAACN,IAAI,CAACM;MAHT,CAAX;MAMAhB,YAAY,CAACW,OAAb,CAAqBpB,MAAM,CAACW,wBAA5B,EAAsDJ,IAAI,CAACc,SAAL,CAAeP,KAAf,CAAtD;MACA,OAAO,CAAC,GAAGA,KAAJ,CAAP;;IACP;MACC,OAAOA,KAAP;EA5BF;AA8BA,CAjCD;;AAmCA,eAAeD,KAAf"},"metadata":{},"sourceType":"module"}